#include <iostream>
using namespace std;

void display(int arr[], int n) {
    cout << "[ ";
    for (int i = 0; i < n; i++) {
        cout << arr[i] << " ";
    }
    cout << "]" << endl;
}

int idx_max(int arr[], int n) {
    int maxVal = arr[0];
    int idx = 0;
    for (int i = 1; i < n; i++) {
        if (arr[i] > maxVal) {
            maxVal = arr[i];
            idx = i;
        }
    }
    cout << "Highest average: " << maxVal << " --> ";
    return idx + 1;
}

int main() {
    int i, j, k = 1;
    int mat[5][4];
    int sp_mat[30][3];
    
    sp_mat[0][0] = 5;
    sp_mat[0][1] = 4;
    
    cout << "Enter 5x4 matrix (grades):" << endl;
    
    for (i = 0; i < 5; i++) {
        cout << "Student " << i+1 << endl;
        for (j = 0; j < 4; j++) {
            cout << "  Subject " << j+1 << ": ";
            cin >> mat[i][j];
        }
    }
    
    int st_avg[5];
    for (i = 0; i < 5; i++) {
        int sum = 0, cnt = 0;
        for (j = 0; j < 4; j++) {
            if (mat[i][j] != 0) {
                sp_mat[k][0] = i;
                sp_mat[k][1] = j;
                sp_mat[k][2] = mat[i][j];
                k++;
                sum += mat[i][j];
                cnt++;
            }
        }
        st_avg[i] = sum / cnt;
    }
    
    int c_avg[4];
    for (j = 0; j < 4; j++) {
        int sum = 0, cnt = 0;
        for (i = 0; i < 5; i++) {
            if (mat[i][j] != 0) {
                sum += mat[i][j];
                cnt++;
            }
        }
        c_avg[j] = sum / cnt;
    }
    
    sp_mat[0][2] = k - 1;
    cout << "\nSparse Matrix Representation:\n[ ";
    for (i = 0; i < k; i++) {
        cout << "{ " << sp_mat[i][0] << " " << sp_mat[i][1] << " " << sp_mat[i][2] << " }";
        if(i == k-1) cout << " ]";
        cout << endl;
    }
    
    cout << "\nStudent averages: ";
    display(st_avg, 5);
    cout << "Course averages: ";
    display(c_avg, 4);
    
    cout << "\nCourse with highest avg -> Subject " << idx_max(c_avg, 4) << endl;
    cout << "Student with highest avg -> Student " << idx_max(st_avg, 5) << endl;
    
    return 0;
}























